---
import PlotFigure from "../components/PlotFigure.astro";
import Layout from "../layouts/Layout.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";

const penguinsAdelie = penguins.filter(({ species }) => species === "Adelie");
const penguinsGentoo = penguins.filter(({ species }) => species === "Gentoo");
const penguinsChinstrap = penguins.filter(({ species }) => species === "Chinstrap");
---

<Layout>
  <main class="max-w-5xl mx-auto px-4 py-8">
    <div class="bg-blue-600 text-white p-6 mb-8 rounded">
      <h1 class="text-2xl font-bold text-center mb-2">Toutes les espèces avec slider</h1>
      <p class="text-center text-blue-100">Navigation rapide entre les espèces</p>
    </div>

    <nav class="mb-8">
      <ul class="flex flex-wrap justify-center gap-4 text-sm md:text-base">
        <li><a href="#adelie" class="text-blue-600 hover:text-blue-800">Adelie</a></li>
        <li><a href="#gentoo" class="text-blue-600 hover:text-blue-800">Gentoo</a></li>
        <li><a href="#chinstrap" class="text-blue-600 hover:text-blue-800">Chinstrap</a></li>
        <li><a href="/" class="text-gray-600 hover:text-gray-800">← Retour</a></li>
      </ul>
    </nav>

    <div class="overflow-x-auto scroll-smooth">
      <div class="flex w-[300%]">
        <section id="adelie" class="w-1/3 min-h-[500px] p-4">
          <h2 class="text-xl font-bold mb-4">Adelie</h2>
          <div class="bg-white border p-4 rounded">
            <PlotFigure
              options={{
                marks: [
                  Plot.dot(penguinsAdelie, {
                    x: "culmen_length_mm",
                    y: "culmen_depth_mm",
                    stroke: "species",
                    fill: "species",
                    fillOpacity: 0.7,
                    r: 3,
                  }),
                ],
                marginLeft: 50,
                marginBottom: 50,
                grid: true,
              }}
            />
          </div>
        </section>

        <section id="gentoo" class="w-1/3 min-h-[500px] p-4">
          <h2 class="text-xl font-bold mb-4">Gentoo</h2>
          <div class="bg-white border p-4 rounded">
            <PlotFigure
              options={{
                marks: [
                  Plot.dot(penguinsGentoo, {
                    x: "culmen_length_mm",
                    y: "culmen_depth_mm",
                    stroke: "species",
                    fill: "species",
                    fillOpacity: 0.7,
                    r: 3,
                  }),
                ],
                marginLeft: 50,
                marginBottom: 50,
                grid: true,
              }}
            />
          </div>
        </section>

        <section id="chinstrap" class="w-1/3 min-h-[500px] p-4">
          <h2 class="text-xl font-bold mb-4">Chinstrap</h2>
          <div class="bg-white border p-4 rounded">
            <PlotFigure
              options={{
                marks: [
                  Plot.dot(penguinsChinstrap, {
                    x: "culmen_length_mm",
                    y: "culmen_depth_mm",
                    stroke: "species",
                    fill: "species",
                    fillOpacity: 0.7,
                    r: 3,
                  }),
                ],
                marginLeft: 50,
                marginBottom: 50,
                grid: true,
              }}
            />
          </div>
        </section>
      </div>
    </div>
  </main>
</Layout>

<style>
  section:target {
    scroll-margin-top: 0;
  }
</style>
